<div class="header">
  <div class="search-container">
    <!-- From Field with Dropdown -->
    <div class="search-field from-field" (click)="toggleFromDropdown()">
      <div class="field-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M2 17L12 22L22 17" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M2 12L12 17L22 12" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <div class="field-content">
        <label class="field-label">From</label>
        <div class="field-value">{{ selectedFrom || 'Select departure city' }}</div>
        <div class="dropdown-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M6 9L12 15L18 9" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
      
      <!-- From Dropdown -->
      <div class="city-dropdown" *ngIf="showFromDropdown">
        <div class="dropdown-search">
          <input 
            type="text" 
            placeholder="Search cities..." 
            [(ngModel)]="fromSearchTerm"
            (input)="filterFromCities()"
            class="search-input"
            #fromSearchInput>
        </div>
        <div class="dropdown-list">
          <div 
            class="dropdown-item" 
            *ngFor="let city of filteredFromCities" 
            (click)="selectFromCity(city, $event)"
            [class.selected]="selectedFrom === city">
            <div class="city-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M8 6V4C8 3.45 8.45 3 9 3H15C15.55 3 16 3.45 16 4V6H19C19.55 6 20 6.45 20 7S19.55 8 19 8H5C4.45 8 4 7.55 4 7S4.45 6 5 6H8Z" fill="#666"/>
                <path d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9H6V19ZM8 11H16V19H8V11Z" fill="#666"/>
              </svg>
            </div>
            {{ city }}
          </div>
        </div>
      </div>
    </div>

    <!-- Swap Button -->
    <div class="swap-button" (click)="swapCities()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M17 17L22 12L17 7" stroke="white" stroke-width="2" />
        <path d="M22 12H9" stroke="white" stroke-width="2" />
        <path d="M7 7L2 12L7 17" stroke="white" stroke-width="2" />
        <path d="M2 12H15" stroke="white" stroke-width="2" />
      </svg>
    </div>

    <!-- To Field with Dropdown -->
    <div class="search-field to-field" (click)="toggleToDropdown()">
      <div class="field-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M21 10C21 17 12 23 12 23S3 17 3 10A9 9 0 0 1 12 1A9 9 0 0 1 21 10Z" stroke="#666" stroke-width="2" />
          <circle cx="12" cy="10" r="3" stroke="#666" stroke-width="2" />
        </svg>
      </div>
      <div class="field-content">
        <label class="field-label">To</label>
        <div class="field-value">{{ selectedTo || 'Select destination city' }}</div>
        <div class="dropdown-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M6 9L12 15L18 9" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
      
      <!-- To Dropdown -->
      <div class="city-dropdown" *ngIf="showToDropdown">
        <div class="dropdown-search">
          <input 
            type="text" 
            placeholder="Search cities..." 
            [(ngModel)]="toSearchTerm"
            (input)="filterToCities()"
            class="search-input"
            #toSearchInput>
        </div>
        <div class="dropdown-list">
          <div 
            class="dropdown-item" 
            *ngFor="let city of filteredToCities" 
            (click)="selectToCity(city, $event)"
            [class.selected]="selectedTo === city">
            <div class="city-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M21 10C21 17 12 23 12 23S3 17 3 10A9 9 0 0 1 12 1A9 9 0 0 1 21 10Z" fill="#666"/>
                <circle cx="12" cy="10" r="3" fill="white"/>
              </svg>
            </div>
            {{ city }}
          </div>
        </div>
      </div>
    </div>

    <!-- Date Field with Calendar -->
    <div class="search-field date-field" (click)="toggleCalendar()">
      <div class="field-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#666" stroke-width="2" />
          <line x1="16" y1="2" x2="16" y2="6" stroke="#666" stroke-width="2" />
          <line x1="8" y1="2" x2="8" y2="6" stroke="#666" stroke-width="2" />
          <line x1="3" y1="10" x2="21" y2="10" stroke="#666" stroke-width="2" />
        </svg>
      </div>
      <div class="field-content">
        <label class="field-label">Date of journey</label>
        <div class="field-value">{{ selectedDate || 'Select date' }}</div>
        <div class="dropdown-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M6 9L12 15L18 9" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
      
      <!-- Calendar Dropdown -->
      <div class="calendar-dropdown" *ngIf="showCalendar">
        <div class="calendar-header">
          <button class="nav-btn" (click)="previousMonth()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M15 18L9 12L15 6" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="month-year">
            <select [(ngModel)]="currentMonth" (change)="updateCalendar()" class="month-select">
              <option value="0">JAN</option>
              <option value="1">FEB</option>
              <option value="2">MAR</option>
              <option value="3">APR</option>
              <option value="4">MAY</option>
              <option value="5">JUN</option>
              <option value="6">JUL</option>
              <option value="7">AUG</option>
              <option value="8">SEP</option>
              <option value="9">OCT</option>
              <option value="10">NOV</option>
              <option value="11">DEC</option>
            </select>
            <span class="year">{{ currentYear }}</span>
          </div>
          <button class="nav-btn" (click)="nextMonth()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 18L15 12L9 6" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
        
        <div class="calendar-grid">
          <div class="day-header">S</div>
          <div class="day-header">M</div>
          <div class="day-header">T</div>
          <div class="day-header">W</div>
          <div class="day-header">T</div>
          <div class="day-header">F</div>
          <div class="day-header">S</div>
          
          <div 
            class="calendar-day" 
            *ngFor="let day of calendarDays" 
            [class.today]="day.isToday"
            [class.selected]="day.isSelected"
            [class.other-month]="day.isOtherMonth"
            [class.disabled]="day.isDisabled"
            (click)="selectDate(day)">
            {{ day.day }}
          </div>
        </div>
        
        <div class="calendar-footer">
          <button class="today-btn" (click)="selectToday()">Today</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Cab Booking Layout -->
<div class="custom-bus-container">

  <!-- Cab Size -->
<div class="bus-option-box red-box">
    <h2 class="box-title">Cab Size</h2>
    <ul class="option-list">
      <li class="option-item" 
          [class.selected]="selectedCabType === 'Micro (1–3)'"
          (click)="selectCabType('Micro (1–3)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Micro (1–3)
              <span *ngIf="selectedCabType === 'Micro (1–3)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item" 
          [class.selected]="selectedCabType === 'Sedan (1–4)'"
          (click)="selectCabType('Sedan (1–4)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Sedan (1–4)
              <span *ngIf="selectedCabType === 'Sedan (1–4)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item" 
          [class.selected]="selectedCabType === 'SUV (1–6)'"
          (click)="selectCabType('SUV (1–6)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">SUV (1–6)
              <span *ngIf="selectedCabType === 'SUV (1–6)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item" 
          [class.selected]="selectedCabType === 'Tempo Traveller (7–12)'"
          (click)="selectCabType('Tempo Traveller (7–12)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Tempo Traveller (7–12)
              <span *ngIf="selectedCabType === 'Tempo Traveller (7–12)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>
    </ul>
  </div>

  <!-- Trip Type -->
  <div class="bus-option-box white-box">
    <h2 class="box-title">Trip Type</h2>
    <ul class="option-list">
      <li class="option-item"
          [class.selected]="selectedTripType === 'One Way'"
          (click)="selectTripType('One Way')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">One Way
              <span *ngIf="selectedTripType === 'One Way'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTripType === 'Round Trip'"
          (click)="selectTripType('Round Trip')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Round Trip
              <span *ngIf="selectedTripType === 'Round Trip'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTripType === 'No Stops'"
          (click)="selectTripType('No Stops')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">No Stops
              <span *ngIf="selectedTripType === 'No Stops'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTripType === 'Select Stops'"
          (click)="selectTripType('Select Stops')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Select Stops
              <span *ngIf="selectedTripType === 'Select Stops'" class="tick-icon">✔</span>
            </div>
            <select class="stops-dropdown">
              <option value="">Choose cities...</option>
              <option value="Delhi">Delhi</option>
              <option value="Mumbai">Mumbai</option>
              <option value="Bangalore">Bangalore</option>
              <option value="Chennai">Chennai</option>
              <option value="Kolkata">Kolkata</option>
            </select>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>
    </ul>
  </div>

  <!-- Facilities -->
  <div class="bus-option-box white-box">
    <h2 class="box-title">Facilities</h2>
    <div class="amenities-container">
      <div 
        class="amenity-item"
        *ngFor="let facility of facilitiesList"
        (click)="toggleFacility(facility)">
        <div class="amenity-checkbox" 
             [class.selected]="selectedFacilities.includes(facility)"></div>
        <div class="amenity-label">{{ facility }}</div>
      </div>
    </div>
  </div>

  <!-- Time Preferences -->
  <div class="bus-option-box red-box">
    <h2 class="box-title">Time Preferences</h2>
    <ul class="option-list">
      <li class="option-item"
          [class.selected]="selectedTime === 'After midnight (12am - 6am)'"
          (click)="selectTime('After midnight (12am - 6am)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">After midnight (12am - 6am)
              <span *ngIf="selectedTime === 'After midnight (12am - 6am)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTime === 'Morning (6am - 12pm)'"
          (click)="selectTime('Morning (6am - 12pm)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Morning (6am - 12pm)
              <span *ngIf="selectedTime === 'Morning (6am - 12pm)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTime === 'Afternoon (12pm - 6pm)'"
          (click)="selectTime('Afternoon (12pm - 6pm)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Afternoon (12pm - 6pm)
              <span *ngIf="selectedTime === 'Afternoon (12pm - 6pm)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>

      <li class="option-item"
          [class.selected]="selectedTime === 'Night (6pm - 12am)'"
          (click)="selectTime('Night (6pm - 12am)')">
        <div class="option-left">
          <div class="option-text">
            <div class="option-label">Night (6pm - 12am)
              <span *ngIf="selectedTime === 'Night (6pm - 12am)'" class="tick-icon">✔</span>
            </div>
          </div>
        </div>
        <button class="select-btn">Select</button>
      </li>
    </ul>
  </div>

  <!-- Proceed Button -->
  <div class="proceed-container">
    <button class="proceed-btn" (click)="handleCabBookingSubmit()">Proceed</button>
  </div>
</div>
<app-cab-booking-form *ngIf="showCabBookingForm" (close)="showCabBookingForm = false"></app-cab-booking-form>


