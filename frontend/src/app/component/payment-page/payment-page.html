
<div class="payment__fullContainer">
    <!-- left Container -->
    <div class="payment__fullContainer_leftContainer">
        <input class="payment__fullContainer_rightContainer_inputOfferCOde" placeholder="ENTER OFFER CODE" />
        <div class="payment__fullContainer_rightContainer_infobar">
            <div class="banner_chip">
                <img src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/safe-payments.svg" alt="CC" />
                <div class="banner_text">
                  
                    <div>Safe and Secure</div>
                    <div>Online Payments</div>
                </div>
            </div>
            <div class="banner_chip">
                <img src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/transactions.svg"
                    alt="Million Transactions" />
                <div class="banner_text">
                    <div>60+ million</div>
                    <div>transactions</div>
                </div>
            </div>
            <div class="banner_chip">
                <img src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/trust.svg" alt="Reliable" />
                <div class="banner_text">
                    <div>10+ years of</div>
                    <div>Trust</div>
                </div>
            </div>
        </div>
        <div class="payment__fullContainer_leftContainer_paymentInstruments">
            <!-- Payment methods -->
            <div class="Payment__stripe">
                <button class="Payment__stripe__button" (click)="makepayment()">Pay With Stripe</button>
            </div>
            <!-- Other Payment Methods -->
            <div class="choose_payment_heading">Choose Other Payment Method</div>
            <div class="payment__fullContainer_leftContainer_paymentInstrument">
                <!-- Credit Card -->
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                    <input class="radioButton" type="radio" />
                    <div class="radioButtonText">Credit Card</div>
                    <div class="paymentIconList">
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/mobile/v2/visa.png"
                            alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/mobile/v2/mastercard.png"
                            alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/maestro.png"
                            alt="" />
                    </div>
                </div>
                <!-- Debit Card -->
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                    <input class="radioButton" type="radio" />
                    <div class="radioButtonText">Debit Card</div>
                    <div class="paymentIconList">
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/mobile/v2/visa.png"
                            alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/mobile/v2/mastercard.png"
                            alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/maestro.png"
                            alt="" />
                    </div>
                </div>
                <!-- Wallets -->
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                    <input class="radioButton" type="radio" />
                    <div class="radioButtonText">Wallets</div>
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/amazonpay.png" alt="" />
                </div>
                <!-- Net Banking -->
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                    <input class="radioButton" type="radio" />
                    <div class="radioButtonText">Net Banking</div>
                    <div class="paymentIconList">
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/axis.png" alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/sbi.png" alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/hdfc.png" alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/icici.png" alt="" />
                        <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/kotak.png" alt="" />
                    </div>
                </div>
            </div>
        </div>
        <div class="UpiPaymentText">
            UPI PAYMENT USING PHONEPAY / GPAY / AMAZONPAY ETC...
        </div>
        <div class="payment__fullContainer_leftContainer_paymentInstrument">
            <!-- UPI payment methods -->
            <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                <input class="radioButton" type="radio" />
                <div class="radioButtonText">Pay through QR Code</div>
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments_new">New</div>
                <div class="paymentIconList">
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/gpay.svg" alt="" />
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/phonepe.svg"
                        alt="" />
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/amazonpay.svg"
                        alt="" />
                </div>
            </div>
            <!-- Pay through UPI ID -->
            <div class="payment__fullContainer_leftContainer_eachPaymentInstruments">
                <input class="radioButton" type="radio" />
                <div class="radioButtonText">Pay through UPI ID</div>
                <div class="payment__fullContainer_leftContainer_eachPaymentInstruments_new">New</div>
                <div class="paymentIconList">
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/gpay.svg" alt="" />
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/phonepe.svg"
                        alt="" />
                    <img class="payment_icon_img" src="https://st.redbus.in/paas/images/web/v2/upi/amazonpay.svg"
                        alt="" />
                </div>
            </div>
        </div>
    </div>
    
  <div class="payment__fullContainer_rightContainer">

  <!-- CAB BOOKING UI -->
  <div *ngIf="cabCustomer && cabBooking" class="payment__fullContainer_rightContainer_trip_container">
    <div class="travel_operator_info">
      <div class="travel_title">{{ cabBooking.operatorName || 'Cab Operator' }}</div>
      <div class="travel_specification">{{ cabBooking.cabType }} / {{ cabBooking.tripType }}</div>
    </div>

    <div class="line"></div>

    <div style="display: flex; justify-content: space-between;">
      <div style="display: flex; justify-content: space-between; width: 200px;">
        <!-- Removed mat-icon -->
        <div style="display: flex; flex-direction: column;">
          <div class="travel_specification">Booking Date</div>
          <div style="display: flex; width: 150px;">
            <div>{{ cabBooking.bookingDate | date: 'yyyy-MM-dd' }}</div>
          </div>
        </div>
      </div>

      <div style="display: flex; flex-direction: column; margin-right: 10px;">
        <div>Cab Size</div>
        <div>{{ cabBooking.cabSize }}</div>
        <!-- ✅ ADDED "Full" below seats -->
        <div>Full</div>
      </div>
    </div>

    <div class="line"></div>

    <div style="display: flex; justify-content: space-between;">
      <div style="display: flex; flex-direction: column;">
        <div class="travel_specification">From</div>
        <div>{{ cabBooking.source }}</div>
        <div>{{ cabBooking.startDateTime | date: 'yyyy-MM-dd' }}</div>
        <div>{{ formatTime(cabCustomer.pickupTime) }}</div>
        <div>{{ cabCustomer.pickupCity }}</div> <!-- ✅ Custom pickupTime -->
      </div>

      <div style="display: flex; flex-direction: column;">
        <div class="travel_specification">To</div>
        <div>{{ cabBooking.destination }}</div>
        <div>{{ cabBooking.endDateTime | date: 'yyyy-MM-dd' }}</div>
        <!-- ✅ Show dropTime as pickupTime + 5 hours -->
        <div>{{ calculateDropTime(cabCustomer.pickupTime) }}</div>
        <div>{{ cabCustomer.dropCity }}</div>
      </div>
    </div>

    <div class="passangerInfo">
      <!-- Removed mat-icon -->
      <!-- ✅ Displaying name entered in cab booking form -->
      <div class="passangerName">{{ cabCustomer.name }}</div>
    </div>

    <div style="background: #f0f0f0; padding: 10px; margin: 10px 0; font-size: 12px;">
                <strong>Debug Info:</strong><br>
                Route: {{ router.url }}<br>
                Is Cab Booking: {{ isCabBooking }}<br>
                Cab Customer Loaded: {{ !!cabCustomer }}<br>
                Cab Booking Loaded: {{ !!cabBooking }}<br>
                Cab Type: {{ cabBooking?.cabType }}<br>
                Pickup Time: {{ cabCustomer?.pickupTime }} ({{ typeof cabCustomer?.pickupTime }})<br>
                Calculated Fare: {{ getFareBasedOnCabType(cabBooking?.cabType) }}<br>
                <button (click)="testApiEndpoints()" style="margin-top: 10px; padding: 5px 10px;">Test API Endpoints</button><br>
                <button (click)="fetchLatestCabData()" style="margin-top: 5px; padding: 5px 10px;">Refresh Cab Data</button>
                <br><br>
                <details>
                    <summary>Raw Customer Data</summary>
                    <pre>{{ cabCustomer | json }}</pre>
                </details>
                <details>
                    <summary>Raw Booking Data</summary>
                    <pre>{{ cabBooking | json }}</pre>
                </details>
    </div>
  </div>

  <!-- BUS BOOKING UI -->
  <div *ngIf="!cabCustomer && !cabBooking" class="payment__fullContainer_rightContainer_trip_container">
    <div class="travel_operator_info">
      <div class="travel_title">{{ operatorname }}</div>
      <div class="travel_specification">Seater / A/C / Sleeper</div>
    </div>

    <div class="line"></div>

    <div style="display: flex; justify-content: space-between;">
      <div style="display: flex; flex-direction: column;">
        <div class="travel_specification">Booking Date</div>
        <div style="display: flex; width: 150px;">
          <div>{{ bookingdate | date: 'yyyy-MM-dd' }}</div>
        </div>
      </div>

      <div style="display: flex; flex-direction: column; margin-right: 10px;">
        <div>Seats Booked</div>
        <div>{{ passseatarray }}</div>
      </div>
    </div>

    <div class="line"></div>

    <div style="display: flex; justify-content: space-between;">
      <div style="display: flex; flex-direction: column;">
        <div class="travel_specification">Boarding Point</div>
        <div>{{ routedetails?.departureLocation?.name }}</div>                
        <div>{{ bookingdate }}</div>
        <div>{{ busdeparturetime }}:00</div> 
      </div>

      <div style="display: flex; flex-direction: column;">
        <div class="travel_specification">Dropping Point</div>
        <div>{{ routedetails?.arrivalLocation?.name }}</div> 
        <div>{{ bookingdate }}</div>
        <div>{{ busarrivaltime }}:00</div>
      </div>
    </div>

    <div class="passangerInfo">
      <!-- Removed mat-icon -->
      <div class="passangerName">{{ customerId?.name }}</div>
    </div>
  </div>

  <!-- COMMON PAYMENT UI -->
  <div class="payment__fullContainer_rightContainer_fair_container">
    <div style="display: flex; justify-content: space-between;">
      <div class="travel_title">FARE BREAKUP</div>
      <img src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/down.svg" width="14" height="14" alt="">
    </div>

    <div style="display: flex; justify-content: space-between; margin-top: 10px;"></div>

    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
      <div class="travel_specification" style="font-weight: bold;">Total Payable</div>
      <div class="travel_specification" style="font-weight: bold;">
        <!-- ✅ Fare conditionally based on cab type -->
        Rs. {{
          (cabCustomer && cabBooking) ? 
          getFareBasedOnCabType(cabBooking.cabType) : 
          passfare
        }}
      </div>
    </div>
  </div>

  <div style="display: flex; justify-content: space-around; margin-top: 10px; width: 95%;">
    <img class="payment_banner_icon_img" src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/master-card-secure-code.png" alt="">
    <img class="payment_banner_icon_img" src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/verified-by-visa.svg" alt="">
    <img class="payment_banner_icon_img" src="https://s3.rdbuz.com/Images/webplatform/Common/Payment/verisign-secured.png" alt="">
  </div>
</div>

</div>